name = "coderclaw-api"
main = "src/index.ts"
compatibility_date = "2025-01-01"
compatibility_flags = ["nodejs_compat"]
tsconfig = "tsconfig.json"

[vars]
ENVIRONMENT = "production"

# DATABASE_URL and JWT_SECRET must be set as secrets:
#   wrangler secret put DATABASE_URL
#   wrangler secret put JWT_SECRET

[[routes]]
pattern = "api.coderclaw.ai/*"
zone_name = "coderclaw.ai"

# worker to serve the app under /coderclawlink (app.coderclaw.ai or coderclaw.ai/coderclawlink)
[[routes]]
pattern = "coderclaw.ai/coderclawlink/*"
zone_name = "coderclaw.ai"

[[routes]]
pattern = "app.coderclaw.ai/*"
zone_name = "coderclaw.ai"
